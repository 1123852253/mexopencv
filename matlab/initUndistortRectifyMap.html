<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <link rel="stylesheet" href="helpwin.css">
      <title>MATLAB File Help: cv.initUndistortRectifyMap</title>
   </head>
   <body>
      <!--Single-page help-->
      <table border="0" cellspacing="0" width="100%">
         <tr class="subheader">
            <td class="headertitle">MATLAB File Help: cv.initUndistortRectifyMap</td>
            <td class="subheader-left"></td>
            <td class="subheader-right"><a href="index.html">Index</a></td>
         </tr>
      </table>
      <div class="title">cv.initUndistortRectifyMap</div>
      <div class="helpcontent"><p>Computes the undistortion and rectification transformation map</p>

<pre><code>[map1, map2] = <a href="initUndistortRectifyMap.html">cv.initUndistortRectifyMap</a>(cameraMatrix, distCoeffs, newCameraMatrix, siz)
[...] = <a href="initCameraMatrix2D.html">cv.initCameraMatrix2D</a>(..., 'OptionName', optionValue, ...)
</code></pre>

<h2> Input</h2>

<ul>
<li><strong>cameraMatrix</strong> Input camera matrix A = [fx,0,cx;0,fy,cy;0,0,1]</li>
<li><strong>distCoeffs</strong> Input vector of distortion coefficients [k1, k2, p1, p2,
     k3, k4, k5, k6] of 4, 5, or 8 elements. If the vector is NULL/empty,
the zero distortion coefficients are assumed.</li>
<li><strong>newCameraMatrix</strong> New camera matrix A' = [fx',0,cx';0,fy',cy';0,0,1]</li>
<li><strong>siz</strong> Undistorted image size.</li>
</ul>

<h2> Output</h2>

<ul>
<li><strong>map1</strong> The first output map.</li>
<li><strong>map2</strong> The second output map.</li>
</ul>

<h2> Options</h2>

<ul>
<li><strong>R</strong> rectification transformation in the object space (3x3 matrix). R1
or R2 , computed by <a href="stereoRectify.html">cv.stereoRectify</a> can be passed here. If the
matrix is empty, the identity transformation is assumed. In
cvInitUndistortMap R assumed to be an identity matrix.</li>
<li><strong>M1Type</strong> Type of the first output map that can be 'uint16' or
'single'. See <a href="convertMaps.html">cv.convertMaps</a>.</li>
</ul>

<p>The function computes the joint undistortion and rectification
transformation and represents the result in the form of maps for
<a href="remap.html">cv.remap</a>. The undistorted image looks like original, as if it is captured
with a camera using the camera matrix = newCameraMatrix and zero
distortion. In case of a monocular camera, newCameraMatrix is usually
equal to cameraMatrix, or it can be computed by
<a href="getOptimalNewCameraMatrix.html">cv.getOptimalNewCameraMatrix</a> for a better control over scaling. In case
of a stereo camera, newCameraMatrix is normally set to P1 or P2 computed
by <a href="stereoRectify.html">cv.stereoRectify</a>.</p>

<p>Also, this new camera is oriented differently in the coordinate space,
according to R . That, for example, helps to align two heads of a stereo
camera so that the epipolar lines on both images become horizontal and
have the same y- coordinate (in case of a horizontally aligned stereo
camera).</p>

<p>The function actually builds the maps for the inverse mapping algorithm
that is used by <a href="remap.html">cv.remap</a>. That is, for each pixel (u,v) in the
destination (corrected and rectified) image, the function computes the
corresponding coordinates in the source image (that is, in the original
image from camera).</p>

<p>In case of a stereo camera, this function is called twice: once for each
camera head, after <a href="stereoRectify.html">cv.stereoRectify</a>, which in its turn is called after
<a href="stereoCalibrate.html">cv.stereoCalibrate</a>. But if the stereo camera was not calibrated, it is
still possible to compute the rectification transformations directly from
the fundamental matrix using <a href="stereoRectifyUncalibrated.html">cv.stereoRectifyUncalibrated</a>. For each
camera, the function computes homography H as the rectification
transformation in a pixel domain, not a rotation matrix R in 3D space. R
can be computed from H as</p>

<pre><code>R = cameraMatrix^-1 * H * cameraMatrix
</code></pre>

<p>where cameraMatrix can be chosen arbitrarily.</p>
</div><!--after help --><!--seeAlso--><div class="footerlinktitle">See also</div><div class="footerlink"> <a href="remap.html">cv.remap</a> <a href="convertMaps.html">cv.convertMaps</a> <a href="getOptimalNewCameraMatrix.html">cv.getOptimalNewCameraMatrix</a>
  <a href="stereoRectify.html">cv.stereoRectify</a> <a href="stereoCalibrate.html">cv.stereoCalibrate</a> <a href="stereoRectifyUncalibrated.html">cv.stereoRectifyUncalibrated</a></div>
   </body>
</html>